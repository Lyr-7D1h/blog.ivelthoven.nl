(this["webpackJsonpblog.ivelthoven.nl"]=this["webpackJsonpblog.ivelthoven.nl"]||[]).push([[0],{145:function(e,t,a){e.exports=a(293)},150:function(e,t,a){},151:function(e,t,a){},293:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(4),o=a.n(l),c=(a(150),a(151),a(152),a(46)),s=a(37),i=a(47),u=a(77),m=function(e,t,a){return new Promise(function(n,r){var l=new XMLHttpRequest;l.addEventListener("load",function(){if(200===l.status&&l.responseText)try{var e=JSON.parse(l.responseText);n(e)}catch(t){r(t)}r(new Error("Request failed with Code: ".concat(l.statusText)))}),l.open(e,u.a+t),"POST"===e?(l.setRequestHeader("Content-Type","application/json"),l.withCredentials=!0,l.send(JSON.stringify(a))):l.send()})},d=a(301),p=function(e,t){d.a.error({message:e,description:t})},f=function(e,t){d.a.success({message:e,description:t})},E=a(295),g=a(79),h=a.n(g),b=a(297),y=a(5),v=b.a.SubMenu,O=E.a.Sider,w=function(e){var t=e.dates,a=["January","February","March","April","May","June","July","August","September","October","November","December"],n=[],l=[];return t.forEach(function(e){-1!==n.indexOf(e.getFullYear())||n.push(e.getFullYear()),-1!==l.indexOf(e.getMonth())||l.push(e.getMonth())}),r.a.createElement(O,{width:200,style:{background:"#fff"}},r.a.createElement(b.a,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],style:{height:"100%",borderRight:0}},n.map(function(e,t){return r.a.createElement(v,{key:"index",title:r.a.createElement("span",null,r.a.createElement(y.a,{type:"snippets"}),e)},l.map(function(e,t){return r.a.createElement(b.a.Item,{key:t},a[e])}))})))},x=E.a.Header,S=function(e){var t=e.selected;return r.a.createElement(x,null,r.a.createElement("div",{className:"logo"}),r.a.createElement(b.a,{mode:"horizontal",defaultSelectedKeys:[t],style:{lineHeight:"64px",float:"left"},theme:"dark"},r.a.createElement(b.a.Item,{disabled:!0},r.a.createElement("b",null,"BLOG.IVELTHOVEN.NL")),r.a.createElement(b.a.Item,{key:"1"},r.a.createElement(c.b,{to:"/"},"Blog")),r.a.createElement(b.a.Item,{key:"2"},r.a.createElement(c.b,{to:"/projects"},"Projects")),r.a.createElement(b.a.Item,{key:"3"},r.a.createElement(c.b,{to:"/learning"},"Learning Tree"))))},k=E.a.Content,I=function(e){var t=e.blog.name;return r.a.createElement(k,{style:{background:"#fff",padding:24,margin:0,minHeight:280}}," ",t," ")},T=function(e){var t=e.items;return r.a.createElement(b.a,{mode:"horizontal",defaultSelectedKeys:"-1",style:{lineHeight:"50px",float:"center",display:"inline",paddingLeft:"20px"},theme:"light"},t.map(function(e,t){return r.a.createElement(b.a.Item,{key:t},e)}))},j=a(298),N=a(300),C=a(296),q=a(38),L=j.a.Option,H=N.a.TextArea,B=C.a.create({name:"blog_form"})(function(e){var t=e.categories,a=e.form,n=(e.onSubmit,a.getFieldDecorator);return r.a.createElement(C.a,{onSubmit:function(e){e.preventDefault(),a.validateFields(function(e,t){console.log(t),e||m("POST","blog",t).then(function(){f("Created")}).catch(function(e){p("Could not create",e.message)})})},className:"login-form"},r.a.createElement(C.a.Item,null,n("title",{rules:[{required:!0}]})(r.a.createElement(N.a,{type:"text",placeholder:"Title"}))),r.a.createElement(C.a.Item,null,n("category",{rules:[{required:!0}]})(r.a.createElement(j.a,{mode:"multiple",placeholder:"Category"},t.map(function(e,t){return r.a.createElement(L,{value:e.id,key:t},e.name)})))),r.a.createElement(C.a.Item,null,n("content",{rules:[{required:!0}]})(r.a.createElement(H,{placeholder:"Content",rows:"10"}))),r.a.createElement(C.a.Item,null,r.a.createElement(q.a,{type:"primary",htmlType:"submit",className:"login-form-button",block:!0},"Create")))}),J=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)([]),c=Object(i.a)(o,2),s=c[0],u=c[1],d=Object(n.useState)([]),f=Object(i.a)(d,2),g=f[0],b=f[1],y=Object(n.useState)(!1),v=Object(i.a)(y,2),O=v[0],x=v[1];return Object(n.useEffect)(function(){x(h.a.get("loggedIn")),m("GET","blog/category").then(function(e){b(e.map(function(e){return e.name})),u(e)}).catch(function(e){p("Could not fetch Blogs",e.message)}),m("GET","blog").then(function(e){l(e)}).catch(function(e){p("Could not fetch Blogs",e.message)})},[]),r.a.createElement(E.a,null,r.a.createElement(S,{selected:"1"}),r.a.createElement(E.a,null,r.a.createElement(w,{dates:[new Date,new Date]}),r.a.createElement(E.a,null,r.a.createElement(T,{items:g}),r.a.createElement("div",{style:{padding:"24px 24px 24px"}},O&&r.a.createElement(E.a,null,r.a.createElement(B,{categories:s})),"CONTENT",a&&a.map(function(e,t){return r.a.createElement(I,{blog:e,key:t})})))))},P=function(){return r.a.createElement(E.a,null,r.a.createElement(S,{selected:"2"}))},R=a(299),D=C.a.create({name:"normal_login"})(function(e){var t=e.form.getFieldDecorator;return r.a.createElement(C.a,{onSubmit:function(t){t.preventDefault(),e.form.validateFields(function(t,a){t||e.onSubmit(a)})},className:"login-form"},r.a.createElement(C.a.Item,null,t("username",{rules:[{required:!0,message:"username pls"}]})(r.a.createElement(N.a,{prefix:r.a.createElement(y.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(C.a.Item,null,t("password",{rules:[{required:!0,message:"pass pls"}]})(r.a.createElement(N.a,{prefix:r.a.createElement(y.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(C.a.Item,null,r.a.createElement(q.a,{type:"primary",htmlType:"submit",className:"login-form-button",block:!0},"Log in")))}),F=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],l=t[1];return r.a.createElement(E.a,null,r.a.createElement(S,{selected:"-1"}),r.a.createElement(E.a,null,r.a.createElement(R.a,{title:"LOGIN",visible:a,onCancel:function(){l(!1)},okButtonProps:{className:"hidden"},cancelButtonProps:{className:"hidden"}},r.a.createElement(D,{onSubmit:function(e){if(e.username&&e.password){var t=new XMLHttpRequest;t.addEventListener("load",function(){200===t.status?(h.a.set("loggedIn",!0,{path:"/"}),f("Logged In"),l(!1)):p("Request failed","".concat(t.statusText))}),t.open("POST",u.a+"auth",!0),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("Authorization","Basic "+btoa("".concat(e.username,":").concat(e.password))),t.withCredentials=!0,t.send()}}})),a||r.a.createElement(s.a,{to:"/"})))};var M=function(){return r.a.createElement(c.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:J}),r.a.createElement(s.b,{exact:!0,path:"/projects",component:P}),r.a.createElement(s.b,{exact:!0,path:"/admin",component:F})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},77:function(e){e.exports=JSON.parse('{"a":"http://localhost:5000/"}')}},[[145,1,2]]]);
//# sourceMappingURL=main.ce82dc89.chunk.js.map